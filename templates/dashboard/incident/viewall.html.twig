{% extends 'dashboard/dashboardbase.html.twig' %}

{% block panel %}

<div class="dashboard-subheader">
  <div class="container-fluid container-fixed-lg">
    <div class="row">
      <div class="col-lg-12">
        <div class="breadcrumb-container">
          <span class="breadcrumb">Incidents</span>
        </div>
        <a class="action-btn btn btn-primary pull-right" href="/dashboard/incidents/add">Add Incident</a>
      </div>
    </div>
  </div>
</div>
<div class="dashboard-panels">
  <div class="container-fluid container-fixed-lg">
    <div class="row">
      <div class="col-lg-12">
        <div class="dashboard-panel-block">
          <div id="incident-view-list" class="table-list">

            {% for incident in incidents %}
              <div class="list-item" data-id="{{ incident.guid }}">
                <div class="list-item-left">
                  <div class="list-item-decoration">
                    <i class="list-item-icon status-icon status-icon-{{ incident.status.type }}"></i>
                  </div>
                  <div class="list-item-content">
                    <span class="list-item-title">{{ incident.name }}</span>
                    <span class="list-item-createdby">{{ incident.createdBy.fullName }}</span>
                    <span class="list-item-description ellipsis-3">{{ incident.message }}</span>
                  </div>
                </div>
                <div class="list-item-right">
                  <a class="btn btn-primary" href="/dashboard/incidents/{{ incident.guid }}">Update</a>
                  <button class="btn btn-error btn-delete">Delete</button>
                </div>
              </div>
            {% endfor %}

            {% if incidents is empty %}
              <span class="empty-list">No incidents reported</span>
            {% endif %}

          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
